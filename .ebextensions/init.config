container_commands:

  01init_oauth_public_key_begin:
    command: "echo \"-----BEGIN PUBLIC KEY-----\" > storage/oauth-public.key"
  02init_oauth_public_key:
    command: "echo \"$OAUTH_PUBLIC_KEY\" >> storage/oauth-public.key"
  03init_oauth_public_key_end:
      command: "echo \"-----END PUBLIC KEY-----\" >> storage/oauth-public.key"

  04init_oauth_private_key_begin:
    command: "echo \"-----BEGIN RSA PRIVATE KEY-----\" > storage/oauth-private.key"
  05init_oauth_private_key:
    command: "echo \"$OAUTH_PRIVATE_KEY\" >> storage/oauth-private.key"
  06init_oauth_private_key_end:
    command: "echo \"-----END RSA PRIVATE KEY-----\" >> storage/oauth-private.key"

  07init_dotenv_app_name:
    command: "echo \"APP_NAME=$APP_NAME\" > .env"
  08init_dotenv_app_name:
    command: "echo \"APP_ENV=$APP_ENV\" >> .env"
  09init_dotenv_app_key:
    command: "echo \"APP_KEY=$APP_KEY\" >> .env"
  10init_dotenv_app_debug:
    command: "echo \"APP_ENV=$APP_DEBUG\" >> .env"
  11init_dotenv_app_url:
    command: "echo \"APP_URL=$APP_URL\" >> .env"

  12init_dotenv_db_connection:
    command: "echo \"DB_CONNECTION=mysql\" >> .env"
  13init_dotenv_db_host:
    command: "echo \"DB_HOST=$RDS_HOSTNAME\" >> .env"
  14init_dotenv_db_port:
    command: "echo \"DB_PORT=3306\" >> .env"
  15init_dotenv_db_database:
    command: "echo \"DB_DATABASE=$RDS_DB_NAME\" >> .env"
  16init_dotenv_db_username:
    command: "echo \"DB_USERNAME=$RDS_USERNAME\" >> .env"
  17init_dotenv_db_password:
    command: "echo \"DB_PASSWORD=$RDS_PASSWORD\" >> .env"

  18init_db:
    command: "php artisan aws:deploy"